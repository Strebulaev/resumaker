<div class="pricing-container">
    <div class="pricing-header">
      <h1>{{ 'BILLING.PRICING_TITLE' | translate }}</h1>
      <p>{{ 'BILLING.PRICING_SUBTITLE' | translate }}</p>
    </div>
  
    <div class="pricing-cards">
      <p-card *ngFor="let plan of plans" 
              [class]="plan.popular ? 'popular-plan' : ''"
              [header]="plan.name">
        
        <div class="plan-price">
          <span class="price-amount">{{ plan.price === 0 ? 'Бесплатно' : (plan.price + ' ₽') }}</span>
          <span *ngIf="plan.price > 0" class="price-period">/месяц</span>
        </div>
  
        <p class="plan-description">{{ plan.description }}</p>
  
        <ul class="plan-features">
          <li *ngFor="let feature of plan.features">{{ feature }}</li>
        </ul>
  
        <button pButton 
                [label]="getButtonLabel(plan)"
                [class]="getButtonClass(plan)"
                [loading]="isLoading"
                (click)="selectPlan(plan)">
        </button>
  
        <div *ngIf="plan.popular" class="popular-badge">
          {{ 'BILLING.POPULAR_CHOICE' | translate }}
        </div>
      </p-card>
    </div>
  
    <p-dialog [(visible)]="showPaymentDialog" 
              [modal]="true" 
              [style]="{ width: '500px' }"
              (onHide)="closeDialog()">
      
      <ng-template pTemplate="header">
        <span class="text-xl font-bold">Оплата тарифа {{ selectedPlan?.name }}</span>
      </ng-template>
  
      <div *ngIf="selectedPlan">
        <p>Вы выбрали тариф <strong>{{ selectedPlan.name }}</strong></p>
        <p>Стоимость: <strong>{{ selectedPlan.price }} ₽</strong></p>
        <p>После оплаты тариф будет активирован автоматически.</p>
      </div>
  
      <ng-template pTemplate="footer">
        <button pButton 
                label="Отмена" 
                class="p-button-text"
                (click)="closeDialog()"></button>
        <button pButton 
                label="Перейти к оплате" 
                [loading]="isLoading"
                (click)="processPayment()"></button>
      </ng-template>
    </p-dialog>
</div>