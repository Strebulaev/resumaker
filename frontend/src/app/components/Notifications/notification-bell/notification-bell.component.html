<div class="notification-bell">
    <p-button 
        #btn
        icon="pi pi-bell" 
        styleClass="p-button-text p-button-plain notification-button"
        (onClick)="togglePopover($event)"
        [badge]="unreadCount > 0 ? unreadCount.toString() : undefined"
        badgeClass="p-badge-danger"
        [loading]="isLoading">
    </p-button>
  
    <p-popover 
        #popover
        [focusOnShow]="false"
        [appendTo]="'body'"
        styleClass="notification-popover">
      
      <ng-template pTemplate="content">
        <div class="notification-popover-content">
          <div class="notification-popover-header">
            <h3>Уведомления</h3>
            <div class="notification-actions">
              <p-button 
                *ngIf="unreadCount > 0"
                icon="pi pi-check" 
                styleClass="p-button-text p-button-sm"
                (onClick)="markAllAsRead()"
                pTooltip="Отметить все как прочитанные">
              </p-button>
              <p-button 
                icon="pi pi-list" 
                styleClass="p-button-text p-button-sm"
                (onClick)="openAllNotifications()"
                pTooltip="Все уведомления">
              </p-button>
            </div>
          </div>
  
          <div class="notification-list">
            <div *ngIf="notifications.length === 0" class="empty-notifications">
              <i class="pi pi-bell-slash"></i>
              <p>Нет уведомлений</p>
            </div>
  
            <div *ngFor="let notification of notifications.slice(0, 5)" 
                 class="notification-item"
                 [class.unread]="!notification.read"
                 [class.important]="notification.important"
                 [ngClass]="getNotificationClass(notification.type)">
              
              <div class="notification-icon">
                <i [class]="getNotificationIcon(notification.type)"></i>
              </div>
              
              <div class="notification-content" (click)="markAsRead(notification)">
                <div class="notification-title">{{ notification.title }}</div>
                <div class="notification-message">{{ notification.message }}</div>
                <div class="notification-time">{{ formatNotificationDate(notification.time) }}</div>
              </div>
  
              <div class="notification-actions">
                <p-button 
                  icon="pi pi-times" 
                  styleClass="p-button-text p-button-sm p-button-danger"
                  (onClick)="deleteNotification(notification, $event)"
                  pTooltip="Удалить">
                </p-button>
              </div>
            </div>
          </div>
  
          <div class="notification-popover-footer">
            <p-button
              label="Все уведомления"
              styleClass="p-button-text p-button-sm"
              (onClick)="openAllNotifications()">
            </p-button>
          </div>
        </div>
      </ng-template>
    </p-popover>
  </div>