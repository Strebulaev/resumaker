<div class="document-management">
  <div class="header">
    <h2>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞–º–∏</h2>
    <div class="actions">
      <button class="btn-primary" (click)="showUploadDialog = true">
        –ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª
      </button>
      <button class="btn-secondary" (click)="createBackup()">
        –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é
      </button>
    </div>
  </div>

  <div class="storage-info" *ngIf="quota$ | async as quota">
    <div class="quota-bar">
      <div class="quota-used" [style.width.%]="(quota.used / quota.limit) * 100"></div>
    </div>
    <div class="quota-text">
      –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–æ: {{ formatFileSize(quota.used) }} –∏–∑ {{ formatFileSize(quota.limit) }}
      ({{ quota.filesCount }} —Ñ–∞–π–ª–æ–≤)
    </div>
  </div>

  <div class="filters">
    <div class="category-filter">
      <label>–ö–∞—Ç–µ–≥–æ—Ä–∏—è:</label>
      <select [(ngModel)]="selectedCategory" (change)="onCategoryChange()">
        <option *ngFor="let category of categories" [value]="category.value">
          {{ category.label }}
        </option>
      </select>
    </div>
  </div>

  <div class="upload-zone"
       [class.drag-over]="isDragOver"
       (dragover)="onDragOver($event)"
       (dragleave)="onDragLeave($event)"
       (drop)="onDrop($event)">
    <div class="upload-content">
      <div class="upload-icon">üìÅ</div>
      <p>–ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ —Ñ–∞–π–ª—ã —Å—é–¥–∞ –∏–ª–∏ <button class="link-btn" (click)="showUploadDialog = true">–≤—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã</button></p>
    </div>
  </div>

  <div class="files-grid">
    <div class="file-card" *ngFor="let file of files">
      <div class="file-header">
        <span class="file-icon">{{ getFileIcon(file.category) }}</span>
        <div class="file-info">
          <h4 class="file-name">{{ file.name }}</h4>
          <span class="file-category">{{ getCategoryLabel(file.category) }}</span>
        </div>
      </div>

      <div class="file-details">
        <div class="file-meta">
          <span class="file-size">{{ formatFileSize(file.size) }}</span>
          <span class="file-date">{{ formatDate(file.createdAt) }}</span>
        </div>
        <div class="file-stats">
          <span class="downloads">–°–∫–∞—á–∏–≤–∞–Ω–∏–π: {{ file.permissions.downloadsCount }}</span>
        </div>
      </div>

      <div class="file-actions">
        <button class="btn-small" (click)="downloadFile(file)">
          –°–∫–∞—á–∞—Ç—å
        </button>
        <button class="btn-small" (click)="createShareLink(file)">
          –ü–æ–¥–µ–ª–∏—Ç—å—Å—è
        </button>
        <button class="btn-danger-small" (click)="deleteFile(file)">
          –£–¥–∞–ª–∏—Ç—å
        </button>
      </div>
    </div>
  </div>

  <div class="upload-dialog" *ngIf="showUploadDialog">
    <div class="dialog-overlay" (click)="showUploadDialog = false"></div>
    <div class="dialog-content">
      <h3>–ó–∞–≥—Ä—É–∑–∏—Ç—å —Ñ–∞–π–ª—ã</h3>
      <div class="upload-form">
        <input type="file" multiple (change)="onFileSelect($event)" style="display: none" #fileInput>
        <div class="upload-area" (click)="fileInput.click()">
          <div class="upload-icon-large">üì§</div>
          <p>–ù–∞–∂–º–∏—Ç–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ —Ñ–∞–π–ª–æ–≤ –∏–ª–∏ –ø–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –∏—Ö —Å—é–¥–∞</p>
          <small>–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞—é—Ç—Å—è: PDF, DOC, DOCX, TXT, JPG, PNG, ZIP</small>
        </div>
      </div>
      <div class="dialog-actions">
        <button class="btn-secondary" (click)="showUploadDialog = false">–ó–∞–∫—Ä—ã—Ç—å</button>
      </div>
    </div>
  </div>
</div>